<!-- This page was created with the RAD auto-doc generator. -->
<!doctype html public "-//w3c//dtd html 3.2 final//en">
<html>
<head>
<title>MIDILOG - MIDI File Event Filter</title>
<meta http-equiv="content-type" content="text/html; charset=iso8859-1">
<meta name="ms.locale" content="en-us">
<meta name="description" content="">
<meta name="ms-hkwd" content="MIDILOG - MIDI File Event Filter">
<link rel="stylesheet" title="default" href="reference.css" type="text/css" media="screen">
</head>
<body topmargin="0">
<table cellspacing=0 cellpadding=0 class=bar width=100% height=25>
<tr class=bar>
<td class=bar>
<i>&nbsp;<a href="index.html" class=trn>Miles Sound System SDK 6.1c</a></i>
</td>
</tr>
</table>
<h1>MIDILOG - MIDI File Event Filter</h1>
<h4>Discussion</h4>
<p> The <b>MIDILOG</b> program strips any non-standard headers and trailers from a Standard MIDI file, and optionally translates certain MIDI events in the file. </p><p>The ability to translate MIDI events makes <b>MIDILOG</b> a powerful tool when dealing with sequencer programs that do not allow certain events to be embedded in a MIDI file, but which are capable of recording other types of events which may be replaced later with the events originally desired by the musician or programmer. </p><p><b>MIDILOG</b> has the following command-line syntax: </p><p></p><code><font size=3 color=#006000><pre><br><b>MIDILOG</b> infile outfile [logfile]<br></pre></font></code><p></p><p> where <b>infile</b> refers to the original MIDI file to be translated, <b>outfile</b> specifies the MIDI output file, and <b>logfile</b> specifies an optional ASCII text file containing a list of event translation rules to apply to the <b>infile's</b> MIDI events while copying them to the <b>outfile</b>. </p><p>An event translation rule consists of two <i>expressions</i> separated by an '=' sign. Both expressions represent MIDI events. During the MIDI file translation process, <b>MIDILOG</b> compares each event in the <b>infile</b> with each event translation rule's <i>lvalue</i>, or the expression on the left side of its '=' sign. If no match is found, the <b>infile's</b> event is written, unchanged, to the <b>outfile</b>. However, if the event matches one of the logfile's lvalues, the event on the right side of the same event translation rule's '=' sign, called the <i>rvalue</i>, is written to the <b>outfile</b> instead. </p><p>Up to 128 event translation rules may appear in each logfile. Each expression used in an event translation rule must take one of the following forms. (Terms in [] brackets may appear zero or more times). </p><p><b>event( [val,] ):</b> Any MIDI event. </p><p><b>meta_event( type, [val,] ):</b> A MIDI meta-event of type /type/, optionally containing zero or more bytes of associated data. For example, <b>meta_event(1, "Test")</b> is identical to <b>event($FF,$01,$04, "Test")</b>. </p><p><b>MT32_sysex_event( addr_MSB, addr, addr_LSB, data, [data,]):</b> A type DT1 System Exclusive event capable of addressing Roland MT-32-compatible synthesizers. No nibble masks or wildcards (see below) may be used. For example, <b>MT32_sysex_event($20,$00,$00, "This is a test")</b>, when written to a MIDI file as an rvalue, will cause the string 'This is a test' to appear on the MT-32's front-panel LCD display when the file is performed. </p><p>The values used within each expression must conform to the following rules: </p><p><b>$nn:</b> A single hexadecimal byte, which may be 1 or 2 digits in length. The letter 'x' may be used to mask one of the nibbles in the byte, causing that nibble to be disregarded in event comparisons. The value of the last nibble masked in a rule's lvalue is restored to any masked nibbles in the rvalue, which is useful for preserving channel nibbles in replaced MIDI status bytes. Character case is not meaningful. Examples: $4, $69, $Bx. </p><p><b>nnn:</b> A single decimal byte, which may range from 1 to 3 digits in length. Examples: 4, 105, 176. </p><p><b>'...' / "...":</b> A string literal value. Either apostrophes or quotation marks may be used. Examples: 'Test', "Test". </p><p><b>? or $xx:</b> Wildcard decimal byte value. The entire byte is masked (disregarded in event comparisons). The value of the last byte masked in a rule's lvalue is restored to any masked bytes in the rvalue, which is useful for preserving data bytes in replaced MIDI events. </p><p>Commas must be used to separate values within expressions. Up to 16 bytes may appear in each rule's lvalue expression, while as many as 128 bytes may appear in each rvalue expression. </p><p>All characters appearing on a line after a semicolon (';') are considered to be comments, and are ignored. All characters appearing before an equal sign ('=') are considered to be part of the rule's lvalue expression; all characters appearing after an equal sign are considered to be part of its rvalue expression. For example, the line: </p><p></p><code><font size=3 color=#006000><pre><br>event($Bx,120,0) = meta_event($01, "Test")   ;Control Change #120<br></pre></font></code><p></p><p> contains a valid event translation rule which will trap <b>infile</b> events that set Controller 120 in any MIDI channel to a value of 0, replacing them in the <b>outfile</b> with Text meta-events containing the string "Test". </p><p>An empty rvalue in a rule (such as <b>event( )</b>) may be used to completely remove events which match the rule's lvalue. When an event is removed in this manner, however, its delta-time prefix is removed as well. This may cause loss of synchronization between tracks. To avoid this problem, it is best to replace the undesired event with an unrecognized Control Change or similar event, rather than simply preventing it from appearing in the <b>outfile</b>. </p><p>It is impossible to use <b>MIDILOG</b>'s advanced features effectively without a good understanding of MIDI events and the Standard MIDI File specification. However, an in-depth examination of these subjects is beyond the scope of this documentation. To learn more about all aspects of MIDI, refer to a good general-purpose reference such as De Furia and Scacciaferro's <i>MIDI Programmer's Handbook</i>. </p><p>Below is a sample logfile for use with <b>MIDILOG</b>. </p><p></p><code><font size=3 color=#006000><pre><br>;<br>;SYSTEST.LOG<br>;Sample event translation logfile - turns SEQ.MID into APP.MID<br>;<br>;Usage: midilog seq.mid app.mid systest.log<br>;<br>     event($Bx,118,0) = meta_event($01, "Second measure")<br>     event($Bx,119,1) = meta_event($02, "Copyright (C) 1991")<br>     event($Bx,120,?) = meta_event($7E,?)                 ;Generic meta<br>     event($Bx,117,?) = event($F0,$43,$12,$00,$07,$F7)    ;Generic sysex<br>     event($Bx,116,?) = MT32_sysex_event($10,$00,$01,1,7,7) ;MT-32 reverb<br></pre></font></code><p></p><p></p>
<p><a href="MIDIREC- Standard MInmfctq.html">Next Topic (MIDIREC- Standard MIDI File Recorder)</a>  </p><p><a href="CLAD - Creative Labsnxhnpk.html">Previous Topic (CLAD - Creative Labs and Ad Lib (TM) Converter)</a>  </p><p>
<br>
<b>Group:</b>
<a href="Miles Sound System Tq6hmqc.html">Miles Sound System Tools Reference</a></p>
<p align=center>
<a href="mailto:Miles@radgametools.com">For technical support, e-mail Miles@radgametools.com</a>
<br>
<a href="http://www.radgametools.com/miles.htm?from=help6.1c">&#169; Copyright 1991-2001 RAD Game Tools, Inc. All Rights Reserved.</a>
</p>
<br>
</body>
</html>
